C  VIDEOREP.FOR - IDENTIFY VIDEO CONFIGURATION & REPORT TO TERMINAL

      INCLUDE 'FGRAPH.FI'

      INCLUDE 'FGRAPH.FD'

      INTEGER*2 X,IREP(11)

      RECORD /videoconfig/vc

      call clearscreen(0)

C      pause 'did clearscreen'

C IDENTIFY HIGHEST RESOLUTION VIDEO MODE      

C      MODESTATUS=SETVIDEOMODE($DEFAULTMODE)

      IROWS=SETVIDEOMODEROWS($XRES256COLOR,20)

      CALL GETTEXTWINDOW(I1,IC1,I2,IC2)

      WRITE(*,*)I1,IC1,I2,IC2

C      ISTAT=GRSTATUS() ! WHAT'S THE FUCKING ARGUMENT FOR THIS???

C      IF(GRSTATUS() .EQ. $GROK)GO TO 10

C5     WRITE(*,100)GRSTATUS

100   FORMAT(' SET FAILED; GRSTATUS=',I3)

C      GO TO 900

C      ISTAT=REGISTERFONTS('C:\FORTRAN\LIB\TMSRB.FON')

C      WRITE(*,1001)ISTAT

1001  FORMAT(' REGISTERFONTS RETURN STATUS=',I3)

10     CALL getvideoconfig(vc)

C      pause 'returned from getvideoconfig'

      IREP(1)=vc.numxpixels

      IREP(2)=VC.NUMYPIXELS

      IREP(3)=VC.NUMTEXTCOLS

      IREP(4)=VC.NUMTEXTROWS

      IREP(5)=VC.NUMCOLORS

      IREP(6)=VC.BITSPERPIXEL

      IREP(7)=VC.NUMVIDEOPAGES

      IREP(8)=VC.MODE

      IREP(9)=VC.ADAPTER

      IREP(10)=VC.MONITOR

      IREP(11)=VC.MEMORY

C NOW REPORT

      WRITE(*,200) (IREP(I),I=1,11)

200   FORMAT(' VIDEO CONFIGURATION AS FOLLOWS:'//

     + '  NUMXPIXELS=',I5//'  NUMYPIXELS=',I5//'  NUMTEXTCOLS=',I5//

     + '  NUMTEXTROWS=',I5//'  NUMCOLORS=',I5//'  BITSPERPIXEL=',I5//

     + '  NUMVIDEOPAGES=',I5//'  MODE=',I3//'  ADAPTER=',I5//

     + '  MONITOR=',I5//'  MEMORY=',I6//)

      PAUSE ' ABOUT TO RESET TO DEFAULT MODE'

      IDUMMY=SETVIDEOMODE($DEFAULTMODE)

900   STOP

      END



